{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/chenjian/react-gq/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n {\\n    users {\\n\\n      name\\n\\n    }\\n  \\n}\"]);_templateObject=function _templateObject(){return data;};return data;}import React from'react';import{gql}from'apollo-boost';import{Query,ApolloProvider,useQuery}from\"react-apollo\";import{ApolloClient,InMemoryCache}from\"apollo-boost\";import{createHttpLink}from\"apollo-link-http\";import{fetch}from\"node-fetch\";var QUERY_USERS=gql(_templateObject());export function UserInfo(){// Polling: rovides near-real-time synchronization with your server\n// by causing a query to execute periodically at a specified interval\nvar query=QUERY_USERS;var varibles={};var p=new Promise(function(resolve){client.query({query:query,varibles:varibles}).then(function(res){resolve(res.data);});});var _useQuery=useQuery(QUERY_USERS,{pollInterval:500}),data=_useQuery.data,loading=_useQuery.loading;console.log(data);// should handle loading status\nif(loading)return/*#__PURE__*/React.createElement(\"p\",null,\"Loading...\");return data.users.map(function(_ref){var name=_ref.name;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,name));});}/*\nconst client = new ApolloClient({\n    uri: 'http://54.197.2.14/graphql/',\n});*/var client=new ApolloClient({link:createHttpLink({uri:'http://54.197.2.14/graphql/',// 这个url可以抽取到配置文件里\nheaders:{'Content-Type':'application/graphql'},useGETForQueries:true}),cache:new InMemoryCache()});var App=function App(){return/*#__PURE__*/React.createElement(ApolloProvider,{client:client},/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:'#00000008',display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',flexDirection:'column'}},/*#__PURE__*/React.createElement(\"h2\",null,\"My first Apollo app \\uD83D\\uDE80\"),/*#__PURE__*/React.createElement(UserInfo,null)));};export default App;","map":{"version":3,"sources":["/Users/chenjian/react-gq/src/App.js"],"names":["React","gql","Query","ApolloProvider","useQuery","ApolloClient","InMemoryCache","createHttpLink","fetch","QUERY_USERS","UserInfo","query","varibles","p","Promise","resolve","client","then","res","data","pollInterval","loading","console","log","users","map","name","link","uri","headers","useGETForQueries","cache","App","backgroundColor","display","justifyContent","alignItems","height","flexDirection"],"mappings":"qVAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,KAAoB,cAApB,CACA,OAASC,KAAT,CAAgBC,cAAhB,CAA+BC,QAA/B,KAA8C,cAA9C,CACA,OAAQC,YAAR,CAAsBC,aAAtB,KAAyC,cAAzC,CACA,OAASC,cAAT,KAA+B,kBAA/B,CACA,OAAQC,KAAR,KAAoB,YAApB,CAEA,GAAMC,CAAAA,WAAW,CAAGR,GAAH,mBAAjB,CAYA,MAAO,SAASS,CAAAA,QAAT,EAAoB,CAEzB;AACA;AACA,GAAMC,CAAAA,KAAK,CAACF,WAAZ,CACA,GAAMG,CAAAA,QAAQ,CAAC,EAAf,CACA,GAAMC,CAAAA,CAAC,CAAG,GAAIC,CAAAA,OAAJ,CAAa,SAACC,OAAD,CAAa,CAClCC,MAAM,CAACL,KAAP,CAAa,CACXA,KAAK,CAALA,KADW,CAEXC,QAAQ,CAARA,QAFW,CAAb,EAIGK,IAJH,CAIQ,SAACC,GAAD,CAAS,CACfH,OAAO,CAACG,GAAG,CAACC,IAAL,CAAP,CACD,CAND,EAOD,CARS,CAAV,CANyB,cAgBCf,QAAQ,CAACK,WAAD,CAAc,CAAEW,YAAY,CAAE,GAAhB,CAAd,CAhBT,CAgBjBD,IAhBiB,WAgBjBA,IAhBiB,CAgBXE,OAhBW,WAgBXA,OAhBW,CAiBzBC,OAAO,CAACC,GAAR,CAAYJ,IAAZ,EACA;AACA,GAAIE,OAAJ,CAAa,mBAAO,0CAAP,CAEb,MAAOF,CAAAA,IAAI,CAACK,KAAL,CAAWC,GAAX,CAAe,kBAAIC,CAAAA,IAAJ,MAAIA,IAAJ,oBACpB,4CACE,6BACGA,IADH,CADF,CADoB,EAAf,CAAP,CAOD,CACD;;;KAMA,GAAMV,CAAAA,MAAM,CAAG,GAAIX,CAAAA,YAAJ,CAAiB,CAC9BsB,IAAI,CAAEpB,cAAc,CAAC,CACfqB,GAAG,CAAE,6BADU,CACqB;AACpCC,OAAO,CAAE,CAAC,eAAgB,qBAAjB,CAFM,CAGfC,gBAAgB,CAAC,IAHF,CAAD,CADU,CAM9BC,KAAK,CAAC,GAAIzB,CAAAA,aAAJ,EANwB,CAAjB,CAAf,CAWC,GAAM0B,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,sBACX,oBAAC,cAAD,EAAgB,MAAM,CAAEhB,MAAxB,eACE,2BAAK,KAAK,CAAE,CACViB,eAAe,CAAE,WADP,CAEVC,OAAO,CAAE,MAFC,CAGVC,cAAc,CAAE,QAHN,CAIVC,UAAU,CAAC,QAJD,CAKVC,MAAM,CAAE,OALE,CAMVC,aAAa,CAAE,QANL,CAAZ,eAQE,iEARF,cAWE,oBAAC,QAAD,MAXF,CADF,CADW,EAAZ,CAmBD,cAAeN,CAAAA,GAAf","sourcesContent":["import React from 'react';\nimport { gql } from 'apollo-boost';\nimport { Query ,ApolloProvider,useQuery} from \"react-apollo\";\nimport {ApolloClient, InMemoryCache}from \"apollo-boost\";\nimport { createHttpLink } from \"apollo-link-http\";\nimport {fetch} from \"node-fetch\"\n\nconst QUERY_USERS = gql`\n {\n    users {\n\n      name\n\n    }\n  \n}`;\n\n\n\nexport function UserInfo() {\n  \n  // Polling: rovides near-real-time synchronization with your server\n  // by causing a query to execute periodically at a specified interval\n  const query=QUERY_USERS\n  const varibles={}\n  const p = new Promise( (resolve) => {\n    client.query({\n      query,\n      varibles,\n      \n    }).then((res) => {\n      resolve(res.data)\n    })\n  })\n  \n  const { data, loading } = useQuery(QUERY_USERS, { pollInterval: 500 });\n  console.log(data)\n  // should handle loading status\n  if (loading) return <p>Loading...</p>;\n\n  return data.users.map(({  name }) => (\n    <div>\n      <p>\n       { name }\n      </p>\n    </div>\n  ));\n}\n/*\nconst client = new ApolloClient({\n    uri: 'http://54.197.2.14/graphql/',\n});*/\n\n\nconst client = new ApolloClient({\n  link: createHttpLink({\n        uri: 'http://54.197.2.14/graphql/', // 这个url可以抽取到配置文件里\n        headers: {'Content-Type': 'application/graphql',},\n        useGETForQueries:true,\n        }),\n  cache:new InMemoryCache(),\n})\n\n\n\n const App = () => (\n  <ApolloProvider client={client}>\n    <div style={{\n      backgroundColor: '#00000008',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems:'center',\n      height: '100vh',\n      flexDirection: 'column'\n    }}>\n      <h2>My first Apollo app 🚀</h2>\n\n\n      <UserInfo/>\n\n    </div>\n  </ApolloProvider>\n\n);\nexport default App;\n"]},"metadata":{},"sourceType":"module"}